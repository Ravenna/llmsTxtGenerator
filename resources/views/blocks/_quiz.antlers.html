<div class="block-section quiz ">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-8 offset-md-2 col-lg-6 offset-lg-3">
                <h4 class="quiz-title">Answer a few simple questions and get a detailed report and free 30 min Search Engine Optimization consult for your website!</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-md-8 offset-md-2 col-lg-6 offset-lg-3 color-white" x-data="form" x-cloak >
                {{ form:create 
                    in="seo_quiz"
                    id="form-contact"
                    csrf="false"
                    @submit.prevent="submit()"
                    js="alpine:dynamic_form"
                    x-ref="form"
                }}

                <div class="form-success" x-show="success">
                    <h3>Transmission Received</h3>
                    <p>We'll get your report ready and then reach out.</p>
                </div>
            
                <div class="quiz"
                    :class="success ? 'd-none' : ''"
                    x-data="{
                        questions: [
                            'happy_with_traffic',
                            'product_or_service',
                            'retail_or_online',
                            'local_regional_nationwide',
                            'budget',
                            'name',
                            'email'
                        ],
                        steps: 6,
                        currentStep: 1,
                        success: false,
                        width: 15,
                        onStepUpdate() {
                            this.currentStep++;
                            let newWidth = (100 / this.steps) * this.currentStep
                            this.width = newWidth
                        },
                        onStepBack() {
                            this.currentStep--;
                            let newWidth = (100 / this.steps) * this.currentStep
                            this.width = newWidth
                        }
                    }"
                >
            
           

                    <div class="steps">
                        <div class="step" x-show="currentStep == 1" x-transition:leave.delay.0ms  x-data="{happy: ''}">
                            <div class="question">
                                <p>Are you happy with the amount of traffic or leads you get from your website?</>
                            </div>
                            <div class="answers">
                                <input type="hidden" name="happy_with_traffic" x-model="happy">
                                <div class="btn answer" @click="happy = 'yes'" :class="happy == 'yes' ? 'selected' : ''">
                                    Yes
                                </div>
                                <div class="btn answer" @click="happy = 'no'" :class="happy == 'no' ? 'selected' : ''">
                                    No
                                </div>
                            </div>
                        </div>

                        <div class="step" x-show="currentStep == 2" x-transition:enter.delay.300ms  x-data="{product_service: ''}">
                            <div class="question">
                                <p>Do you offer a product or service?</p>
                            </div>
                            <div class="answers">
                                <input type="hidden" name="product_service" x-model="product_service">

                                <div class="answer btn" @click="product_service = 'product'" :class="product_service == 'product' ? 'selected' : ''">
                                    Product
                                </div>
                                <div class="answer btn" @click="product_service = 'service'" :class="product_service == 'service' ? 'selected' : ''">
                                    Service
                                </div>
                            </div>
                        </div>

                        <div class="step" x-show="currentStep == 3" x-transition:enter.delay.300ms  x-data="{retail: ''}">
                            <div class="question">
                                <p>Do you have a retail location or only online?</p>
                            </div>
                            <div class="answers">
                                <input type="hidden" name="retail_or_online" x-model="retail">

                                <div class="answer btn" @click="retail = 'yes'" :class="retail == 'yes' ? 'selected' : ''">
                                    Retail
                                </div>
                                <div class="answer btn" @click="retail = 'no'" :class="retail == 'no' ? 'selected' : ''">
                                    Online
                                </div>
                            </div>
                        </div>

                        <div class="step" x-show="currentStep == 4" x-transition:enter.delay.300ms  x-data="{region: ''}">
                            <div class="question">
                                <p>Do you sell locally, regionally or nationwide?</p>
                            </div>
                            <div class="answers three-up">
                                <input type="hidden" name="local_regional_nationwide" x-model="region">

                                <div class="answer btn" @click="region = 'local'" :class="region == 'local' ? 'selected' : ''">
                                    Locally
                                </div>
                                <div class="answer btn" @click="region = 'regional'" :class="region == 'regional' ? 'selected' : ''">
                                    Regionally 
                                </div>
                                <div class="answer btn" @click="region = 'nationwide'" :class="region == 'nationwide' ? 'selected' : ''">
                                    Nationwide
                                </div>
                            </div>
                        </div>

                        <div class="step" x-show="currentStep == 5" x-transition:enter.delay.300ms  x-data="{seo_budget: ''}">
                            <div class="question">
                                <p>What is your SEO budget (pick the closest to your actual budget)?</p>
                            </div>
                            <div class="answers four-up">
                                <input type="hidden" name="budget" x-model="seo_budget">

                                <div class="answer btn" @click="seo_budget = '500'" :class="seo_budget == '500' ? 'selected' : ''">
                                    $500/mo
                                </div>
                                <div class="answer btn" @click="seo_budget = '1000'" :class="seo_budget == '1000' ? 'selected' : ''">
                                    $1,000/mo 
                                </div>
                                <div class="answer btn" @click="seo_budget = '2500'" :class="seo_budget == '2500' ? 'selected' : ''">
                                    $2,500/mo 
                                </div>
                                <div class="answer btn" @click="seo_budget = '5000'" :class="seo_budget == '5000' ? 'selected' : ''">
                                    $5k+/mo 
                                </div>
                               
                            </div>
                        </div>

                        <div class="step" x-show="currentStep == 6" x-transition:enter.delay.300ms  x-data="{region: ''}">
                            <div class="question">
                                <p>Share your name and email and we'll get you a custom report for your website and all of the ways we can help.</p>
                            </div>
                            <div class="answers flex-column form-wrapper">
                                <div class="form-row mb-3">
                                    <label for="name">My Name Is</label>
                                    <div class="form-div"></div>
                                    <input class="form-control" name="name" id="name" name="name" x-bind:class="{'invalid':errors.includes('name')}" data-rules='["required"]'   maxlength="40" required>
                                    <p class="error-message text-end text-danger" x-show="errors.includes('name')" x-transition:enter>Please input your name</p>
                                </div>

                                <div class="form-row">
                                    <label for="email">My Email Is</label>
                                    <div class="form-div"></div>
                                    <input type="email" class="form-control" id="email" name="email" x-bind:class="{'invalid':errors.includes('email') }" data-rules='["required"]'  required>
                                    <p class="error-message text-end text-danger" x-show="errors.includes('email')" x-text="errors['email']" x-transition:enter>Please enter your email address</p>

                                </div>

                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary" x-bind:disabled="loading">Get My Report</button>
                                </div>
                            </div>
                        </div>

                        <div 
                            class="d-flex flex-row justify-content-center next-back" :class="currentStep == 6 ? 'd-none' : ''"
                        >
                            <a 
                                href="#" 
                                class="btn btn-primary mx-2" 
                                :class="currentStep == 1 ? 'disabled' : ''" 
                                @click.prevent="onStepBack">Prev</a>
                            <a 
                                href="#" 
                                class="btn btn-primary mx-2" 
                                :class="currentStep == 6 ? 'disabled' : ''" 
                                @click.prevent="onStepUpdate">Next</a>
                        </div>
                    </div>
                    <div class="steps-row-wrap">
                        <div class="steps-row" :style="`width: ${width}%`"></div>
                    </div>
                    <div class="steps-count text-center">
                        <span x-text="currentStep"></span> of <span x-text="steps"></span>
                    </div>
                </div>
                <input type="text" class="d-none" name="{{ honeypot ?? 'honeypot' }}">

                {{ /form:create }}
            </div>
        </div>
    </div>

</div>